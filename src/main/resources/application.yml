spring:
  application:
    name: bank-management-system
  config:
    import: optional:file:.env[.properties]

  datasource:
    driver-class-name: org.postgresql.Driver
    url: ${DB_URL:jdbc:postgresql://localhost:5432/banking_db}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:root}

    # Elasticsearch Configuration
    elasticsearch:
      uris: http://localhost:9200
      connection-timeout: 5s
      socket-timeout: 30s
      username: # empty since security is disabled
      password: # empty since security is disabled

    # Batch Configuration (for data migration)
    batch:
      job:
        enabled: false # Don't run jobs automatically
      initialize-schema: always
      jdbc:
        initialize-schema: always

  # Elasticsearch Index Configuration
  elasticsearch:
    index:
      name: transactions
      shards: 1
      replicas: 0
      refresh-interval: "1s"
    bulk:
      size: 1000
      concurrent: true
      flush-interval: 5s
      retry:
        attempts: 3
        delay: 1000

  h2:
    console:
      enabled: true

  jpa:
    show-sql: true
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        format_sql: true

  liquibase:
    change-log: classpath:db/changelog/master.yml
    enabled: true
    default-schema: public
    drop-first: false

logging:
  level:
    com.banking: DEBUG
    org.springframework: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

server:
  tomcat:
    accesslog:
      enabled: true
  port: 8082
  error:
    include-message: always
    include-binding-errors: always

application:
  security:
    jwt:
      secret-key: ${JWT_SECRET_KEY:secret}

  elasticsearch:
    batch-size: 1000
    max-retries: 3
    initial-delay: 1000
    max-delay: 10000
    index-settings:
      transient:
        indices.memory.index_buffer_size: "512mb"
